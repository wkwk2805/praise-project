{"version":3,"file":"static/webpack/static\\development\\pages\\lyrics_update_display.js.8d388054ec8b47789faf.hot-update.js","sources":["webpack:///./components/UpdateDisplay.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport axios from \"axios\";\r\nimport host from \"../util/hostname\";\r\n\r\nconst UpdateDisplay = ({ lyrics }) => {\r\n  const [info, setInfo] = useState(lyrics);\r\n  const [contents, setContents] = useState(\"\");\r\n  const [fileName, setFileName] = useState(lyrics.file || \"\");\r\n  useEffect(() => {\r\n    setContents(\r\n      info.contents\r\n        .map(e => {\r\n          return e.statement;\r\n        })\r\n        .join(\"\\n\\n\")\r\n    );\r\n  }, []);\r\n  // 값이 변경될 때마다 값에 대한 내용을 넣어줌\r\n  const onChangeHandler = e => {\r\n    switch (e.target.name) {\r\n      case \"file\":\r\n        setInfo({\r\n          ...info,\r\n          [e.target.name]: e.target.value.split(/\\\\/)[2],\r\n          preFile: fileName\r\n        });\r\n        break;\r\n      case \"contents\":\r\n        setContents(e.target.value);\r\n        break;\r\n      default:\r\n        setInfo({ ...info, [e.target.name]: e.target.value });\r\n        break;\r\n    }\r\n  };\r\n  const _submit = () => {\r\n    const data = { ...info, contents };\r\n    for (let key in data) {\r\n      if (data[key] === \"\") {\r\n        delete data[key];\r\n      }\r\n    }\r\n    axios({\r\n      url: `${host}/api`,\r\n      method: \"patch\",\r\n      data: data\r\n    })\r\n      .then(res => {\r\n        console.log(res.data);\r\n      })\r\n      .catch(err => console.log(err));\r\n  };\r\n  return (\r\n    <Layout title=\"가사수정 페이지\">\r\n      <div className=\"container\">\r\n        <div className=\"form-group\">\r\n          <h5 className=\"text-center\" style={{ margin: \"20px 0px 0px 0px\" }}>\r\n            가사를 수정해 주세요\r\n          </h5>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"제목\"\r\n            className=\"form-control\"\r\n            name=\"title\"\r\n            onChange={onChangeHandler}\r\n            value={info.title && info.title}\r\n            style={{ margin: \"20px 0px 15px 0px\" }}\r\n          />\r\n          <select\r\n            className=\"form-control\"\r\n            onChange={onChangeHandler}\r\n            name=\"code\"\r\n            value={info.code && info.code}\r\n          >\r\n            <option value=\"\">악보코드</option>\r\n            <option value=\"C\">C 코드</option>\r\n            <option value=\"D\">D 코드</option>\r\n            <option value=\"E\">E 코드</option>\r\n            <option value=\"F\">F 코드</option>\r\n            <option value=\"G\">G 코드</option>\r\n            <option value=\"A\">A 코드</option>\r\n            <option value=\"B\">B 코드</option>\r\n          </select>\r\n          <p />\r\n          <textarea\r\n            name=\"\"\r\n            id=\"\"\r\n            cols=\"30\"\r\n            rows=\"10\"\r\n            placeholder=\"가사\"\r\n            className=\"form-control\"\r\n            name=\"contents\"\r\n            onChange={onChangeHandler}\r\n            value={contents && contents}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            placeholder=\"탭으로 TAG를 구분 해주세요\"\r\n            name=\"tag\"\r\n            onChange={onChangeHandler}\r\n            value={info.tag && info.tag}\r\n          />\r\n        </div>\r\n        <input\r\n          type=\"file\"\r\n          id=\"uploadFile\"\r\n          style={{ display: \"none\" }}\r\n          name=\"file\"\r\n          onChange={onChangeHandler}\r\n          accept=\"image/jpeg,image/gif,image/png\"\r\n        />\r\n        <button className=\"btn btn-info\">\r\n          <label\r\n            htmlFor=\"uploadFile\"\r\n            style={{ cursor: \"pointer\", margin: \"0px\" }}\r\n          >\r\n            <i\r\n              className=\"fas fa-upload\"\r\n              style={{ fontSize: \"30px\", cursor: \"pointer\" }}\r\n            />\r\n            <div style={{ cursor: \"pointer\" }}>upload</div>\r\n          </label>\r\n        </button>\r\n        <div style={{ display: \"inline-block\", marginLeft: \"10px\" }}>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control form-control-lg\"\r\n            readOnly\r\n            style={{ backgroundColor: \"white\" }}\r\n            placeholder=\"악보이미지파일\"\r\n            value={info.file && info.file}\r\n          />\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <button className=\"btn btn-primary\" onClick={_submit}>\r\n            <span>등록</span> {` `}\r\n            <i className=\"fas fa-plus-circle\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UpdateDisplay;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAGA;AACA;AAGA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAKA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAbA;AAeA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAYA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;;;;A","sourceRoot":""}