{"version":3,"file":"static/webpack/static\\development\\pages\\lyrics_list.js.32716a61573fb229ff3b.hot-update.js","sources":["webpack:///./components/LyricsList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Link from \"next/link\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectData } from \"../modules/sagas\";\r\nimport axios from \"axios\";\r\n\r\nconst LyricsList = () => {\r\n  const select = useSelector(state => state.select);\r\n  const [lyrics, setLyrics] = useState([]);\r\n  const [checked, setChecked] = useState([]);\r\n  const dispatch = useDispatch();\r\n  // init\r\n  useEffect(() => {\r\n    addEventListener(\"scroll\", scrollHandler);\r\n    getInitData();\r\n  }, [select]);\r\n  // init data\r\n  const getInitData = () => {\r\n    if (lyrics.length === 0) {\r\n      axios\r\n        .get(\"http://localhost:3001/api\")\r\n        .then(res => {\r\n          setLyrics(res.data);\r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    } else {\r\n      select.map(e => setLyrics(lyrics.concat(e)));\r\n    }\r\n  };\r\n  // scroll event\r\n  const scrollHandler = () => {\r\n    const { innerHeight } = window;\r\n    const { scrollHeight } = document.body;\r\n    // IE에서는 document.documentElement 를 사용.\r\n    const scrollTop =\r\n      (document.documentElement && document.documentElement.scrollTop) ||\r\n      document.body.scrollTop;\r\n    // 스크롤링 했을때, 브라우저의 가장 밑에서 100정도 높이가 남았을때에 실행하기위함.\r\n    if (scrollHeight - innerHeight - scrollTop < 100) {\r\n      dispatch(selectData()); // 넣어준 값으로 다시 뿌려줄 준비하기\r\n    }\r\n  };\r\n  // checkbox event\r\n  const checkboxHandler = e => {\r\n    setChecked(checked.concat({ title: e.target.title, code: e.target.code }));\r\n  };\r\n  return (\r\n    <>\r\n      <Layout title=\"가사목록페이지\">\r\n        <div className=\"container\">\r\n          <div\r\n            className=\"input-group mb-3\"\r\n            style={{ margin: \"20px 0px 0px 0px\" }}\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control\"\r\n              placeholder=\"제목 또는 가사를 입력해 주세요\"\r\n            />\r\n            <div className=\"input-group-append\">\r\n              <button className=\"input-group-text\">\r\n                <i className=\"fas fa-search\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-9\">\r\n              {lyrics.map(e => {\r\n                return (\r\n                  <div\r\n                    key={e.l_id}\r\n                    className=\"card\"\r\n                    style={{\r\n                      width: \"16rem\",\r\n                      float: \"left\",\r\n                      margin: \"0px 10px 10px 0px\"\r\n                    }}\r\n                  >\r\n                    <img\r\n                      src={\r\n                        e.file\r\n                          ? `http://localhost:3001/uploads/${e.file}`\r\n                          : `./static/no_img.gif`\r\n                      }\r\n                      className=\"card-img-top\"\r\n                    />\r\n                    <div className=\"card-body\">\r\n                      <h5 className=\"card-title\">\r\n                        <span>\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            id={`title_${e.l_id}`}\r\n                            onChange={checkboxHandler}\r\n                            style={{ width: \"20px\" }}\r\n                          />\r\n                          <label htmlFor={`title_${e.l_id}`}>{e.title}</label>\r\n                        </span>\r\n                      </h5>\r\n                      <p className=\"card-text\">{e.contents[0].statement}</p>\r\n\r\n                      <button\r\n                        className=\"btn btn-primary\"\r\n                        style={{ float: \"left\" }}\r\n                      >\r\n                        악보 다운로드\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n            <div>\r\n              <div\r\n                className=\"col-sm-2 position-fixed border\"\r\n                style={{ padding: \"15px\" }}\r\n              >\r\n                <h4 className=\"text-center\">가사 제목</h4>\r\n                <p />\r\n                <ul className=\"list-group list-group-flush\">\r\n                  {/* 반복시작 */}\r\n                  {checked.map(e => {\r\n                    return (\r\n                      <li\r\n                        className=\"list-group-item\"\r\n                        style={{ verticalAlign: \"center\" }}\r\n                      >\r\n                        <input type=\"checkbox\" id=\"check\" />\r\n                        {` `}\r\n                        <label htmlFor=\"check\">{e.title + \" \" + e.code}</label>\r\n                        <i\r\n                          className=\"fas fa-window-close\"\r\n                          style={{\r\n                            color: \"red\",\r\n                            cursor: \"pointer\",\r\n                            float: \"right\",\r\n                            fontSize: \"20px\"\r\n                          }}\r\n                        />\r\n                      </li>\r\n                    );\r\n                  })}\r\n                  {/* 반복끝 */}\r\n                </ul>\r\n                <p />\r\n                <div className=\"text-center\">\r\n                  <Link href=\"/lyrics_check_view\">\r\n                    <button className=\"btn btn-success\">PPT 생성</button>\r\n                  </Link>\r\n                  {` `}\r\n                  <button className=\"btn btn-danger\">PPT 제거</button>\r\n                  <p />\r\n                  <button className=\"btn btn-primary\">악보다운로드</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Layout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LyricsList;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAKA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AACA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAJA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;;;;A","sourceRoot":""}